webpackJsonp([1],{104:function(t,e){},105:function(t,e){},136:function(t,e,s){var o=s(20)(s(67),s(140),null,null,null);t.exports=o.exports},137:function(t,e,s){var o=s(20)(s(68),s(139),null,null,null);t.exports=o.exports},138:function(t,e,s){function o(t){s(105)}var n=s(20)(s(69),s(142),o,null,null);t.exports=n.exports},139:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdl-card mdl-shadow--2dp"},[s("div",{staticClass:"mdl-card__supporting-text"},[s("h2",{staticClass:"mdl-card__title-text"},[t._v("New Post")]),t._v(" "),s("form",{attrs:{action:"#"}},[s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"mdl-textfield__input",attrs:{type:"text",maxlength:"40"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),t._v(" "),t.title?t._e():s("label",{staticClass:"mdl-textfield__label"},[t._v("Title")])])]),t._v(" "),s("form",{attrs:{action:"#"}},[s("div",{staticClass:"mdl-textfield mdl-js-textfield"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.details,expression:"details"}],staticClass:"mdl-textfield__input",attrs:{type:"text",rows:"14",maxlength:"400"},domProps:{value:t.details},on:{input:function(e){e.target.composing||(t.details=e.target.value)}}}),t._v(" "),t.details?t._e():s("label",{staticClass:"mdl-textfield__label"},[t._v("Details...")])])])]),t._v(" "),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("a",{staticClass:"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect",on:{click:t.post}},[t._v("\n      "+t._s(t.postButtonText)+"\n    ")]),t._v(" "),s("a",{staticClass:"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect",on:{click:function(e){t.$emit("cancel")}}},[t._v("\n      Cancel\n    ")])])])},staticRenderFns:[]}},140:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdl-card mdl-shadow--2dp"},[s("div",{staticClass:"mdl-card__title"},[s("h2",{staticClass:"mdl-card__title-text"},[t._v(t._s(t.post.title))])]),t._v(" "),s("div",{staticClass:"mdl-card__supporting-text"},[t._v(t._s(t.post.details))]),t._v(" "),s("div",{staticClass:"mdl-card__actions mdl-card--border"},[s("a",{staticClass:"mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect",on:{click:function(e){t.$emit("close")}}},[t._v("\n      Close\n    ")])])])},staticRenderFns:[]}},141:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"h-100",attrs:{id:"app"}},[s("main",{staticClass:"h-100"},[s("post-map")],1)])},staticRenderFns:[]}},142:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"h-100"},[s("div",{attrs:{id:"map"}}),t._v(" "),s("div",{staticClass:"fab"},[s("button",{staticClass:" mdl-button mdl-js-button mdl-button--fab mdl-button--colored",on:{click:t.locate}},[s("i",{staticClass:"material-icons"},[t._v("gps_fixed")])]),t._v(" "),s("br"),s("br"),t._v(" "),s("button",{staticClass:" mdl-button mdl-js-button mdl-button--fab mdl-button--colored",on:{click:t.togglePostEditor}},[s("i",{staticClass:"material-icons"},[t._v("add")])])]),t._v(" "),t.showPostEditor?s("post-editor",{staticClass:"post",attrs:{marker:t.newPostMarker},on:{cancel:function(e){t.showPostEditor=!1}}}):t._e(),t._v(" "),t.showPost?s("post",{staticClass:"post",attrs:{post:t.post},on:{close:function(e){t.showPost=!1}}}):t._e()],1)},staticRenderFns:[]}},36:function(t,e,s){"use strict";var o=s(70),n=s.n(o),a=s(37),i=s(65);e.a={createPost:function(t,e,s){var o=i.a.encode(s.lat(),s.lng(),4),l=Date.now(),r=a.database.ref("regions-posts/"+o),d=r.push();return new n.a(function(o,n){d.set({createdAt:l,lat:s.lat(),lng:s.lng(),title:t,details:e}).then(function(t){o(t)}).catch(function(t){n(t)})})},getPosts:function(t,e){var s=i.a.encode(t.lat(),t.lng(),4);a.database.ref("regions-posts/"+s).orderByChild("createdAt").on("child_added",function(t){e(t.val())})}}},37:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),s.d(e,"database",function(){return c});var o=s(64),n=s(63),a=s.n(n),i=s(62),l=s.n(i),r=s(61),d=s.n(r);l.a.initializeApp(d.a);var c=l.a.database();o.a.config.productionTip=!1,new o.a({el:"#app",template:"<App/>",components:{App:a.a}})},61:function(t,e){t.exports={apiKey:"AIzaSyDhV0SbEq0mxTxLR6ydAiw2jfjWPqQzPH0",authDomain:"props-dd456.firebaseapp.com",databaseURL:"https://props-dd456.firebaseio.com",projectId:"props-dd456",storageBucket:"",messagingSenderId:"757120167992"}},63:function(t,e,s){function o(t){s(104)}var n=s(20)(s(66),s(141),o,null,null);t.exports=n.exports},65:function(t,e,s){"use strict";e.a={encode:function(t,e,s){for(var o=-90,n=90,a=-180,i=180,l=0,r="",d=16,c=0;c<5*s;c++){if(c%2==0){var p=(a+i)/2;e<p?i=p:(l+=d,a=p)}else{var u=(o+n)/2;t<u?n=u:(l+=d,o=u)}1===d?(r+="0123456789bcdefghjkmnpqrstuvwxyz".charAt(l),l=0,d=16):d/=2}return r}}},66:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(138),n=s.n(o);e.default={name:"app",components:{PostMap:n.a}}},67:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"post",props:["post"]}},68:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(36);e.default={name:"post-editor",props:["marker"],data:function(){return{title:"",details:"",postButtonText:"post"}},methods:{post:function(){var t=this;o.a.createPost(this.title,this.details,this.marker.position).then(function(e){t.$emit("cancel")}).catch(function(e){e&&(t.postButtonText="retry")})}}}},69:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s(137),n=s.n(o),a=s(136),i=s.n(a),l=s(36);e.default={name:"post-map",components:{PostEditor:n.a,Post:i.a},data:function(){return{showPostEditor:!1,map:null,newPostMarker:null,postMarkers:[],showPost:!1,post:{title:"",details:""}}},mounted:function(){this.initMap()},methods:{initMap:function(){this.map=new google.maps.Map(document.getElementById("map"),{center:{lat:46.2,lng:6.1667},zoom:11,zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},mapTypeControl:!0,scaleControl:!0,streetViewControl:!0,streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_TOP},rotateControl:!0}),this.map.addListener("drag",function(t){}),this.map.addListener("dragend",function(t){});var t=this;this.map.addListener("bounds_changed",function(e){t.getPosts()}),this.locate()},togglePostEditor:function(){if(this.showPost=!1,this.showPostEditor=!0,null===this.newPostMarker){this.newPostMarker=new google.maps.Marker({position:this.map.getCenter(),draggable:!0,animation:google.maps.Animation.DROP,map:this.map});var t=this;this.newPostMarker.addListener("click",function(){t.showPostEditor=!0})}else this.newPostMarker.setPosition(this.map.getCenter())},locate:function(){if(navigator.geolocation){var t=this;navigator.geolocation.getCurrentPosition(function(e){var s=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);t.map.setCenter(s)})}},getPosts:function(){var t=this;this.postMarkers.map(function(t){return t.setMap(null),t}),this.postMarkers=[];var e=this;l.a.getPosts(this.map.getCenter(),function(s){var o=new google.maps.LatLng(s.lat,s.lng),n=new google.maps.Marker({position:o,map:t.map});n.addListener("click",function(){e.showPostEditor=!1,e.post.title=s.title,e.post.details=s.details,e.showPost=!0}),e.postMarkers.push(n)})}}}}},[37]);
//# sourceMappingURL=app.891cde4d9f9115170079.js.map